[gd_scene load_steps=9 format=2]

[ext_resource path="res://scenes/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://scripts/PlayerCamera.gd" type="Script" id=2]
[ext_resource path="res://scripts/RoomsManager.gd" type="Script" id=3]
[ext_resource path="res://scenes/SquareRoom.tscn" type="PackedScene" id=4]
[ext_resource path="res://scenes/Fireball.tscn" type="PackedScene" id=5]
[ext_resource path="res://scenes/Mob.tscn" type="PackedScene" id=6]
[ext_resource path="res://scenes/Spikes.tscn" type="PackedScene" id=7]
[ext_resource path="res://scenes/HealthBar.tscn" type="PackedScene" id=8]

[node name="Main" type="Node"]

[node name="RoomsRoot" type="Spatial" parent="."]

[node name="RoomsManager" type="RoomManager" parent="RoomsRoot"]
roomlist = NodePath("RoomsList")
script = ExtResource( 3 )

[node name="RoomsList" type="Spatial" parent="RoomsRoot/RoomsManager"]

[node name="Room1" parent="RoomsRoot/RoomsManager/RoomsList" instance=ExtResource( 4 )]
south_open = false

[node name="OmniLight" type="OmniLight" parent="RoomsRoot/RoomsManager/RoomsList/Room1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 50, 0 )
include_in_bound = false
light_energy = 1.5
shadow_enabled = true
omni_range = 100.0
omni_attenuation = 0.025
omni_shadow_mode = 0

[node name="Spikes" parent="RoomsRoot/RoomsManager/RoomsList/Room1" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.2, 0 )

[node name="Mob" parent="RoomsRoot/RoomsManager/RoomsList/Room1" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -25 )

[node name="Room5" parent="RoomsRoot/RoomsManager/RoomsList" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 100, 0, -100 )
east_open = false
north_open = false

[node name="Room4" parent="RoomsRoot/RoomsManager/RoomsList" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -100, 0, 0 )
south_open = false
west_open = false
north_open = false

[node name="Room3" parent="RoomsRoot/RoomsManager/RoomsList" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -100 )
west_open = false
north_open = false

[node name="OmniLight" type="OmniLight" parent="RoomsRoot/RoomsManager/RoomsList/Room3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 50, 0 )
include_in_bound = false
light_energy = 1.5
shadow_enabled = true
omni_range = 100.0
omni_attenuation = 0.025
omni_shadow_mode = 0

[node name="Mob1" parent="RoomsRoot/RoomsManager/RoomsList/Room3" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, -25 )

[node name="Room2" parent="RoomsRoot/RoomsManager/RoomsList" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 100, 0, 0 )
east_open = false
south_open = false

[node name="OmniLight" type="OmniLight" parent="RoomsRoot/RoomsManager/RoomsList/Room2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 50, 0 )
include_in_bound = false
light_energy = 1.5
shadow_enabled = true
omni_range = 100.0
omni_attenuation = 0.025
omni_shadow_mode = 0

[node name="Mob1" parent="RoomsRoot/RoomsManager/RoomsList/Room2" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 1.5, 0 )

[node name="Player" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 25 )
collision_mask = 30
spell_scene = ExtResource( 5 )

[node name="PlayerCamera" type="Camera" parent="."]
transform = Transform( 1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 0, 0 )
projection = 1
size = 50.0
script = ExtResource( 2 )
offset_y = 37
offset_z = 37
padding = 25
ground_mesh_path = "/root/Main/RoomsRoot/RoomsManager/RoomsList/Room1/Ground/MeshInstance"

[node name="UI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="RoomLabel" type="Label" parent="UI"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -21.0
margin_top = 2.0
margin_right = 21.0
margin_bottom = 16.0
text = "ROOM"

[node name="HealthLabel" type="Label" parent="UI"]
anchor_top = 1.0
anchor_bottom = 1.0
margin_left = 2.0
margin_top = -14.0
margin_right = 52.0
text = "HEALTH"

[node name="HealthBar" parent="UI" instance=ExtResource( 8 )]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -344.0
margin_top = -13.0
margin_right = -344.0
margin_bottom = -13.0

[connection signal="new_room_entered" from="Player" to="PlayerCamera" method="_on_Player_new_room_entered"]
